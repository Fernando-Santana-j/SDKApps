<!DOCTYPE html>
<html>

<head>
    <%- include('./reusable/head.ejs') %>
        <title>SDKApps Junte-se hoje mesmo!</title>
        <link rel="stylesheet" href="/public/css/style.css">
        <meta name="google-signin-client_id" content="AIzaSyCiodUSjgz96XHFFozpuukVzVPAE0bvJe4.apps.googleusercontent.com">
</head>

<body>
    <%- include('./reusable/register.ejs') %>
        <%- include('./reusable/login.ejs') %>
            <%- include('./reusable/codeConfirm.ejs') %>
                <header>
                    <div class="container header-content">
                        <div class="logo">SDKApps</div>
                        <nav class="nav-links">
                            <a href="#features">Recursos</a>
                            <a href="#news">Novidades</a>
                            <a href="#partners">Parceiros</a>
                            <a href="#testimonials">Depoimentos</a>
                            
                        </nav>
                        <div class="logins-buttons">
                            <button id="buttons-register" class="secondary-button">Registrar-se</button>
                            <button id="buttons-login" class="cta-button">Login</button>
                            <a id="enter-button" href="/dashboard"  class="cta-button">Entrar</a>
                        </div>
                    </div>
                </header>

                <section class="hero">
                    <div class="container hero-content">
                        <div class="hero-text">
                            <h1 class="hero-title">Crie sua <span>loja virtual</span> e venda online!</h1>
                            <p class="hero-subtitle">Crie sua loja virtual profissional em minutos, sem precisar de
                                conhecimento
                                t√©cnico! Nossa plataforma completa √© feita para empreendedores digitais que desejam
                                vender com
                                facilidade. Integre-se aos maiores meios de comunica√ß√£o, como o Discord, e comece a
                                lucrar hoje
                                mesmo! üöÄüí∞</p>
                            <div class="hero-buttons">
                                <button class="cta-button init-button">Come√ßar Agora</button>
                                <a href="/store/showcaseDemo" target="_blank" style="text-decoration: none !important;"
                                    class="secondary-button">Ver Demo</a>
                            </div>
                        </div>
                        
                        <div class="hero-image">
                            <img class="hero-img" src="/public/img/Logos/CAPA-PIXEL.gif" alt="Dashboard da plataforma">
                            <div class="floating-shape shape1"></div>
                            <div class="floating-shape shape2"></div>
                        </div>
                    </div>
                </section>

                <section id="features" class="features">
                    <div class="container">
                        <h2 class="section-title">Recursos Poderosos</h2>
                        <p class="section-subtitle">Tudo o que voc√™ precisa para criar e gerenciar sua loja de produtos
                            digitais em
                            um s√≥ lugar.</p>
                        <div class="features-grid">
                            <div class="feature-card" style="border: 1px solid var(--primary-light);">
                                <div class="feature-icon">üí∏</div>
                                <h3 class="feature-title">
                                    Menores tarifas do mercado</h3>
                                <p class="feature-description"><strong>Tarifas de apenas 4% por venda</strong>, sem
                                    custos extras e sem necessidade de assinatura.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">‚ú®</div>
                                <h3 class="feature-title">Designs Modernos</h3>
                                <p class="feature-description">Templates profissionais e personaliz√°veis para criar sua
                                    loja com sua
                                    identidade visual √∫nica.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üîí</div>
                                <h3 class="feature-title">Entrega Segura</h3>
                                <p class="feature-description">Sistema de prote√ß√£o de conte√∫do e entrega autom√°tica de
                                    produtos
                                    digitais para seus clientes.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üí≥</div>
                                <h3 class="feature-title">Pagamentos Integrados</h3>
                                <p class="feature-description">Aceite pagamentos de diversas formas, com integra√ß√µes
                                    nativas √†s
                                    principais gateways do mercado.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üìä</div>
                                <h3 class="feature-title">An√°lises Detalhadas</h3>
                                <p class="feature-description">Acompanhe o desempenho de sua loja com relat√≥rios e
                                    m√©tricas em tempo
                                    real.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">üöÄ</div>
                                <h3 class="feature-title">Marketing Integrado</h3>
                                <p class="feature-description">Ferramentas de email marketing, cupons de desconto e
                                    programas de
                                    afiliados inclusos.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <img src="/public/img/assets/discord_logo.png" alt="">
                                </div>
                                <h3 class="feature-title">Integra√ß√£o com o discord</h3>
                                <p class="feature-description">Integra√ß√£o para vendas 100% autom√°ticas no Discord, com
                                    diversas ferramentas avan√ßadas para gerenciamento de servidores!</p>
                            </div>

                        </div>
                    </div>
                </section>

                <section id="news" class="news">
                    <div class="bg-glow glow1"></div>
                    <div class="bg-glow glow2"></div>
                    <div class="container">
                        <h2 class="section-title">Novidades da Plataforma</h2>
                        <p class="section-subtitle">Estamos sempre melhorando! Confira as atualiza√ß√µes mais recentes.
                        </p>
                        <div class="news-container">
                            <div class="news-card">
                                <img class="news-image" src="/public/img/Logos/CAPA-PIXEL.gif" alt="Nova vers√£o">
                                <div class="news-content">
                                    <div class="news-date">01 de Mar√ßo, 2025</div>
                                    <h3 class="news-title">Nova interface do painel de controle</h3>
                                    <p class="news-excerpt">Redesenhamos completamente o painel administrativo para
                                        torn√°-lo mais
                                        intuitivo e eficiente para os lojistas.</p>
                                    <a href="#" class="read-more">Saiba mais ‚Üí</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                <section id="partners" class="partners">
                    <div class="container">
                        <h2 class="section-title">Nossos Parceiros</h2>
                        <p class="section-subtitle">Empresas que confiam e colaboram com nossa plataforma</p>
                    </div>
                    <div class="partners-carousel">
                        <div class="carousel-track">
                            <div class="partner-item">
                                <img class="partner-logo" src="/public/img/Logos/CAPA-PIXEL.gif" alt="Parceiro 1">
                                <span class="partner-name">DigiMaster</span>
                            </div>

                        </div>
                    </div>
                </section>

                <section id="testimonials" class="testimonials">
                    <div class="container">
                        <h2 class="section-title">O que dizem nossos clientes</h2>
                        <p class="section-subtitle">Hist√≥rias reais de empreendedores que transformaram seus neg√≥cios
                            com nossa
                            plataforma</p>
                        <div class="testimonial-container">
                            <div class="testimonial-slides">
                                <div class="testimonial-slide">
                                    <div class="testimonial-card">
                                        <div class="quote-icon">‚ùù</div>
                                        <p class="testimonial-text">Nunca imaginei que seria t√£o f√°cil criar minha loja
                                            e vender
                                            meus e-books. Em apenas duas semanas, recuperei o investimento na
                                            plataforma!</p>
                                        <div class="testimonial-author">
                                            <img class="author-image" src="/public/img/Logos/CAPA-PIXEL.gif"
                                                alt="Autor do depoimento">
                                            <div class="author-details">
                                                <span class="author-name">Mariana Silva</span>
                                                <span class="author-company">Autora de E-books</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="testimonial-controls">
                                <div class="testimonial-dot active" data-slide="0"></div>
                                <div class="testimonial-dot" data-slide="1"></div>
                                <div class="testimonial-dot" data-slide="2"></div>
                            </div>
                        </div>
                    </div>
                </section>


                <section class="cta-section">
                    <div class="container cta-content">
                        <h2 class="cta-title">Pronto para iniciar seu neg√≥cio digital?</h2>
                        <p class="cta-text">Junte-se a milhares de empreendedores que est√£o vendendo produtos digitais
                            com sucesso.
                            Se ainda tiver alguma d√∫vida, n√£o hesite em entrar em contato com nosso suporte. Estamos √†
                            disposi√ß√£o
                            para ajudar! üòä</p>
                        <div class="cta-buttons">
                            <button class="cta-button init-button">Criar Minha Loja</button>
                            <button class="secondary-button">Falar com Suporte</button>
                        </div>
                    </div>
                </section>

                <footer>
                    <div class="container footer-content">
                        <div class="footer-main">
                            <div class="footer-logo">
                                <img id="footer-logo-image" src="/public/img/Logos/logo-text-dark.png">
                            </div>
                            <p class="footer-desc">Plataforma completa para cria√ß√£o de lojas virtuais e venda de
                                produtos digitais.
                                Impulsione seu neg√≥cio online hoje mesmo.</p>
                            <div class="social-links">


                                <a href="#" title="Instagram" class="social-icon">

                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">

                                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>

                                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>

                                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>

                                    </svg>

                                </a>





                            </div>

                        </div>
                        <div class="footer-column">
                            <h4>Plataforma</h4>
                            <ul class="footer-links">
                                <li><a href="#features">Recursos</a></li>
                                <li><a href="#news">Novidades</a></li>
                                <li><a href="/store/showcaseDemo" target="_blank">Demonstra√ß√£o</a></li>
                                <li><a href="#">Parceiros</a></li>
                            </ul>
                        </div>
                        <div class="footer-column">
                            <h4>Suporte</h4>
                            <ul class="footer-links">
                                <li><a class="disabled" href="#">Central de Ajuda</a></li>
                                <li><a href="#">Contato</a></li>
                                <li><a class="disabled" href="#">Status</a></li>
                            </ul>
                        </div>
                        <div class="footer-column">
                            <h4>Legal</h4>
                            <ul class="footer-links">
                                <li><a class="disabled" href="#">Termos de Uso</a></li>
                                <li><a class="disabled" href="#">Privacidade</a></li>
                                <li><a class="disabled" href="#">Cookies</a></li>
                                <li><a class="disabled" href="#">LGPD</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="copyright">
                        ¬© 2025 SDKApps. Todos os direitos reservados.
                        Desenvolvido por <a href="https://fernandojunio.com.br" target="_blank"
                            style="text-decoration: underline;">Fernando Santana</a>.
                    </div>
                </footer>

                <%- include('./reusable/script.ejs') %>
                    <script src="https://accounts.google.com/gsi/client"></script>

                    <script defer>
                        var userID = null;
                        let googleLoginSession = false
                    </script>

                    <script type="module">
                        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
                        import { getAuth, GoogleAuthProvider, onAuthStateChanged, browserSessionPersistence, setPersistence, signInWithRedirect, signInWithPopup } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js';

                        async function loginGoogle(user, redirect) {
                            let session = await fetch('/auth/login/google', {
                                method: 'POST',
                                credentials: 'include',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    user: {
                                        email: user.email,
                                        username: user.displayName ? user.displayName : user.email.replace(/@.+$/, ''),
                                    }
                                })
                            }).then(response => { return response.json() })

                            if (session.success == true) {
                                if (redirect == true) {
                                    if (session.emailVerify == false) {
                                        document.getElementById('register-popup-containner').close()
                                        document.getElementById('login-popup-containner').close()
                                        document.getElementById('code-confirm-popup-containner').open()
                                    } else {
                                        location.href = '/dashboard'
                                    }
                                }
                                showEnterButtonLogin()
                            } else {
                                errorNotify(session.data)
                            }
                        }



                        const firebaseApp = initializeApp({
                            apiKey: "AIzaSyCiodUSjgz96XHFFozpuukVzVPAE0bvJe4",
                            authDomain: "test2-bf5db.firebaseapp.com",
                            projectId: "test2-bf5db",
                            storageBucket: "test2-bf5db.firebasestorage.app",
                            messagingSenderId: "924947297688",
                            appId: "1:924947297688:web:c9c5d97d96258416e9a7ed",
                            measurementId: "G-KPE16JB8MB"
                        });
                        const provider = new GoogleAuthProvider();

                        const auth = getAuth();

                        async function showEnterButtonLogin() {
                            let enterButton = document.getElementById("enter-button")
                            let buttonsRegister = document.getElementById("buttons-register")
                            let buttonsLogin = document.getElementById("buttons-login")
                            
                            buttonsRegister.style.display = 'none'
                            buttonsLogin.style.display = 'none'
                            enterButton.style.position = 'relative'
                            enterButton.style.opacity = '1'
                            enterButton.style.right = '0'
                        }

                        document.addEventListener('DOMContentLoaded', async () => {
                            if ('logout' in urlParams && urlParams['logout'] != 'false') {
                                await auth.signOut().then(() => {
                                    localStorage.removeItem('access_token')
                                    localStorage.removeItem('userID')
                                    searchParams.delete('logout');

                                    var newUrl = url.origin + url.pathname + (searchParams.toString() ? '?' + searchParams.toString() : '');
                                    window.history.replaceState(null, '', newUrl);
                                }).catch((error) => {
                                    console.log(error);
                                });
                            }

                            auth.onAuthStateChanged(async function (user) {
                                if (user) {
                                    await loginGoogle(user, false)
                                    showEnterButtonLogin()
                                    mensageNotify("Detectamos que voc√™ est√° logado com o google!")
                                    googleLoginSession = true
                                    if (document.getElementById('register-popup-containner').isOpen == true || document.getElementById('login-popup-containner').isOpen == true) {
                                        setTimeout(() => {
                                            location.href = '/dashboard'
                                        }, 300)
                                    }
                                }
                            });
                        })

                        document.addEventListener('click', async (e) => {
                            let target = e.target
                            if (target.closest('.googleLoginClass')) {
                                let user = await signInWithPopup(auth, provider)
                                loginGoogle(user.user, true)
                            }

                        })


                    </script>
                    <script>
                        

                        let sessionUser = JSON.parse(JSON.stringify('<%= sessionUser %>')).replace(/&#34;/g, '"')
                        sessionUser = JSON.parse(sessionUser)
                        if (sessionUser) {
                            userID = sessionUser.uid
                        }

                        const openDiscordLogin = async () => {
                            let discordLogin = await window.open('/redirect/discord', '_blank', 'width=500,height=600');
                            window.addEventListener('message', (event) => {
                                if (event.data.includes('uid')) {
                                    let uid = event.data.replace('uid=', '')
                                    if (uid && uid.length > 2) {
                                        location.href = `/dashboard`
                                    } else {
                                        errorNotify('Erro ao logar com discord!')
                                    }
                                }
                            });
                        };



                        document.getElementById('register-button').addEventListener('click', async (e) => {


                            let email = document.getElementById('register-email-input').value
                            let senha = document.getElementById('register-password-input').value
                            let confirmSenha = document.getElementById('register-confirm-password-input').value

                            if (!senha || !confirmSenha || senha != confirmSenha) {
                                return errorNotify('As senhas n√£o coincidem!')
                            }

                            if (!email || email.length < 8 || !(/^[^\s@]+@[^\s@]+\.[^\s@]+$/).test(email)) {
                                return errorNotify('Email invalido ou muito curto!')
                            }

                            if (senha.length < 6 || confirmSenha.length < 6) {
                                return errorNotify('Senha invalida ou muito curta!')
                            }
                            e.target.innerHTML = '<svg class="loader-svg-mini" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a12" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#FFFFFF" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".3" stop-color="#FFFFFF" stop-opacity=".9" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".6" stop-color="#FFFFFF" stop-opacity=".6" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor:rgb(116, 116, 116);"></stop><stop offset=".8" stop-color="#FFFFFF" stop-opacity=".3" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset="1" stop-color="#FFFFFF" stop-opacity="0" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a12)" stroke-width="14" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#FFFFFF" stroke-width="14" stroke-linecap="round" cx="100" cy="100" r="70" data-darkreader-inline-stroke="" style="--darkreader-inline-stroke:rgb(248, 248, 248);"></circle></svg>'
                            let session = await fetch('/auth/register', {
                                method: 'POST',
                                credentials: 'include',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    email: email,
                                    senha: senha
                                }),
                            }).then(response => { return response.json() })
                            if (session.success == true) {
                                userID = session.userID
                                document.getElementById('register-popup-containner').close()
                                document.getElementById('code-confirm-popup-containner').open()
                            } else {
                                errorNotify(session.data)
                                e.target.innerHTML = 'Cadastrar-se'
                            }
                        })


                        document.getElementById('login-button').addEventListener('click', async (e) => {
                            console.log(userID, sessionUser);

                            if (userID && sessionUser.emaiVerify == true) {
                                location.href = '/dashboard'
                                return
                            }

                            if (userID && sessionUser.emaiVerify == false) {
                                sendCodeEmail()
                                return
                            }

                            let email = document.getElementById('login-email-input').value
                            let senha = document.getElementById('login-password-input').value

                            if (!email || email.length < 8 || !(/^[^\s@]+@[^\s@]+\.[^\s@]+$/).test(email)) {
                                return errorNotify('Email invalido ou muito curto!')
                            }

                            if (!senha || senha.length < 6) {
                                return errorNotify('Senha invalida ou muito curta!')
                            }
                            e.target.innerHTML = '<svg class="loader-svg-mini" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a12" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#FFFFFF" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".3" stop-color="#FFFFFF" stop-opacity=".9" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".6" stop-color="#FFFFFF" stop-opacity=".6" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor:rgb(116, 116, 116);"></stop><stop offset=".8" stop-color="#FFFFFF" stop-opacity=".3" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset="1" stop-color="#FFFFFF" stop-opacity="0" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a12)" stroke-width="14" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#FFFFFF" stroke-width="14" stroke-linecap="round" cx="100" cy="100" r="70" data-darkreader-inline-stroke="" style="--darkreader-inline-stroke:rgb(248, 248, 248);"></circle></svg>'
                            let session = await fetch('/auth/login', {
                                method: 'POST',
                                credentials: 'include',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    email: email,
                                    senha: senha
                                }),
                            }).then(response => { return response.json() })
                            if (session.success == true) {
                                userID = session.userID
                                document.getElementById('login-popup-containner').close()
                                document.getElementById('code-confirm-popup-containner').open()
                            } else {
                                errorNotify(session.data)
                                e.target.innerHTML = 'Entrar'
                            }
                        })

                        document.getElementById('code-confirm-button').addEventListener('click', async (e) => {

                            e.target.innerHTML = '<svg class="loader-svg-mini" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><radialGradient id="a12" cx=".66" fx=".66" cy=".3125" fy=".3125" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#FFFFFF" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".3" stop-color="#FFFFFF" stop-opacity=".9" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset=".6" stop-color="#FFFFFF" stop-opacity=".6" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor:rgb(116, 116, 116);"></stop><stop offset=".8" stop-color="#FFFFFF" stop-opacity=".3" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop><stop offset="1" stop-color="#FFFFFF" stop-opacity="0" data-darkreader-inline-stopcolor="" style="--darkreader-inline-stopcolor: #6d006d;"></stop></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a12)" stroke-width="14" stroke-linecap="round" stroke-dasharray="200 1000" stroke-dashoffset="0" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#FFFFFF" stroke-width="14" stroke-linecap="round" cx="100" cy="100" r="70" data-darkreader-inline-stroke="" style="--darkreader-inline-stroke:rgb(248, 248, 248);"></circle></svg>'
                            let verify = await fetch('/security/code/verify', {
                                method: 'POST',
                                credentials: 'include',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    code: Array.from(inputs).map(input => input.value).join(''),
                                    type: 'email',
                                    user: userID
                                })
                            }).then(response => { return response.json() })
                            console.log(verify);
                            if (verify.success == true) {
                                location.href = '/dashboard'
                            } else {
                                errorNotify(verify.data)
                                e.target.innerHTML = 'Verificar'
                            }
                        })
                    </script>

                    <script src="/public/js/script.js"></script>

</body>

</html>